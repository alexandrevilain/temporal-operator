apiVersion: v1
kind: Secret
metadata:
  name: cassandra-password
  namespace: demo
type: Opaque
data:
  PASSWORD: Y2Fzc2FuZHJh
---
apiVersion: temporal.io/v1beta1
kind: TemporalCluster
metadata:
  name: prod
  namespace: demo
spec:
  version: 1.17.5
  numHistoryShards: 1
  jobTtlSecondsAfterFinished: 300
  persistence:
    defaultStore:
      cassandra:
        hosts:
          - "cassandra.demo"
        port: 9042
        user: cassandra
        keyspace: temporal
        datacenter: datacenter1
        disableInitialHostLookup: true
      passwordSecretRef:
        name: cassandra-password
        key: PASSWORD
    visibilityStore:
      cassandra:
        hosts:
          - "cassandra.demo"
        port: 9042
        user: cassandra
        keyspace: temporal_visibility
        datacenter: datacenter1
        disableInitialHostLookup: true
      passwordSecretRef:
        name: cassandra-password
        key: PASSWORD
  ui:
    enabled: true
  admintools:
    enabled: true
  metrics:
    enabled: true
    prometheus:
      listenAddress: "0.0.0.0:9090"
